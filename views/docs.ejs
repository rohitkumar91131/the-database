<%- include('partials/header') %>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    
    <div class="mb-16 border-l-4 border-yellow-500 pl-6 animate-fade-in-up">
        <h1 class="text-6xl font-black text-white mb-4 tracking-tighter">NEXUS <span class="text-yellow-400">DOCS</span></h1>
        <p class="text-gray-400 text-xl max-w-3xl font-light">
            Welcome to the Nexus Core. Connect your applications to our global database using simple HTTP requests.
        </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-20">
        <div class="bg-[#0f172a] p-8 rounded-3xl border border-gray-800">
            <h3 class="text-white font-bold text-xl mb-4 flex items-center gap-3">
                <span class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center text-sm text-yellow-400">1</span>
                Base Connection
            </h3>
            <p class="text-gray-500 mb-6 text-sm leading-relaxed">All API requests start with our secure core URL. Copy this for your environment variables.</p>
            <div class="bg-black p-4 rounded-xl border border-gray-700 flex justify-between items-center group">
                <code class="text-yellow-400 font-mono text-sm"><%= baseUrl %></code>
                <button onclick="navigator.clipboard.writeText('<%= baseUrl %>')" class="text-gray-600 group-hover:text-white transition text-[10px] font-bold">COPY</button>
            </div>
        </div>

        <div class="bg-[#0f172a] p-8 rounded-3xl border border-gray-800">
            <h3 class="text-white font-bold text-xl mb-4 flex items-center gap-3">
                <span class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center text-sm text-yellow-400">2</span>
                Authentication
            </h3>
            <p class="text-gray-500 mb-6 text-sm leading-relaxed">Current version (v2.4) is open-access for developers. No API key is required for public GET requests.</p>
            <div class="inline-flex items-center gap-2 px-4 py-2 bg-green-500/10 text-green-500 rounded-lg text-xs font-bold">
                <span class="relative flex h-2 w-2">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                </span>
                PUBLIC ACCESS ENABLED
            </div>
        </div>
    </div>

    <hr class="border-gray-900 mb-20">

    <div class="mb-20">
        <h2 class="text-2xl font-bold text-white mb-8">Query Parameters</h2>
        <div class="overflow-hidden rounded-2xl border border-gray-800 bg-[#0f172a]/40">
            <table class="w-full text-left">
                <thead class="bg-gray-900/50 text-[10px] text-gray-500 uppercase tracking-widest">
                    <tr>
                        <th class="px-6 py-4">Parameter</th>
                        <th class="px-6 py-4">Function</th>
                        <th class="px-6 py-4">Example</th>
                    </tr>
                </thead>
                <tbody class="text-sm text-gray-300 divide-y divide-gray-800">
                    <tr class="hover:bg-white/5">
                        <td class="px-6 py-4 font-mono text-cyan-400">search</td>
                        <td class="px-6 py-4 font-light">Filters results by title or name</td>
                        <td class="px-6 py-4"><code class="bg-black px-2 py-1 rounded text-xs">?search=Marvel</code></td>
                    </tr>
                    <tr class="hover:bg-white/5">
                        <td class="px-6 py-4 font-mono text-purple-400">page</td>
                        <td class="px-6 py-4 font-light">Navigates through pagination</td>
                        <td class="px-6 py-4"><code class="bg-black px-2 py-1 rounded text-xs">?page=3</code></td>
                    </tr>
                    <tr class="hover:bg-white/5">
                        <td class="px-6 py-4 font-mono text-pink-400">limit</td>
                        <td class="px-6 py-4 font-light">Limits number of items per page</td>
                        <td class="px-6 py-4"><code class="bg-black px-2 py-1 rounded text-xs">?limit=20</code></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
        <div class="space-y-6">
            <h3 class="text-xs font-black text-gray-600 uppercase tracking-[0.4em]">Live Testing</h3>
            
            <div class="space-y-3">
                <button onclick="setEndpoint('/api/movies?search=Avenger')" class="w-full text-left p-4 rounded-xl bg-gray-900/40 border border-gray-800 hover:border-cyan-500 transition-all flex justify-between items-center group">
                    <span class="text-white text-sm font-medium">Search Movies</span>
                    <span class="text-[10px] text-gray-600 font-mono">GET</span>
                </button>
                <button onclick="setEndpoint('/actors?search=Tom')" class="w-full text-left p-4 rounded-xl bg-gray-900/40 border border-gray-800 hover:border-purple-500 transition-all flex justify-between items-center group">
                    <span class="text-white text-sm font-medium">Query Actors</span>
                    <span class="text-[10px] text-gray-600 font-mono">GET</span>
                </button>
                <button onclick="setEndpoint('/products?page=1')" class="w-full text-left p-4 rounded-xl bg-gray-900/40 border border-gray-800 hover:border-pink-500 transition-all flex justify-between items-center group">
                    <span class="text-white text-sm font-medium">List Gear</span>
                    <span class="text-[10px] text-gray-600 font-mono">GET</span>
                </button>
            </div>
        </div>

        <div class="lg:col-span-2">
            <div class="bg-[#0f172a] rounded-3xl border border-gray-800 overflow-hidden shadow-2xl">
                <div class="bg-gray-900/80 px-6 py-4 border-b border-gray-800 flex items-center gap-4">
                    <div class="flex gap-1.5">
                        <div class="w-2.5 h-2.5 rounded-full bg-red-500/20"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/20"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-green-500/20"></div>
                    </div>
                    <div class="flex-1 bg-black/40 rounded-lg px-4 py-2 flex items-center border border-gray-700/50">
                        <span class="text-gray-600 text-[10px] mr-2">HTTPS</span>
                        <input id="api-url-input" type="text" class="bg-transparent text-yellow-400 font-mono text-xs w-full focus:outline-none" value="/api/movies">
                    </div>
                    <button onclick="triggerNexusFetch()" id="run-btn" class="bg-white text-black font-black text-[10px] px-6 py-2.5 rounded-lg uppercase tracking-widest hover:bg-yellow-400 transition">Execute</button>
                </div>

                <pre id="response-box" class="p-8 bg-black/20 min-h-[450px] max-h-[600px] overflow-auto text-green-400 font-mono text-sm leading-relaxed scrollbar-hide">
// System Ready. Select an endpoint or type custom query above.
// Query engine will apply filters automatically.</pre>
            </div>
        </div>
    </div>
</div>

<style>
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    #response-box { scrollbar-width: none; }
</style>

<script>
    function setEndpoint(path) {
        document.getElementById('api-url-input').value = path;
    }

    async function triggerNexusFetch() {
        const path = document.getElementById('api-url-input').value;
        const resBox = document.getElementById('response-box');
        const btn = document.getElementById('run-btn');
        
        btn.innerText = "RUNNING...";
        btn.disabled = true;
        resBox.innerText = "// Calling Nexus Engine Interface...";
        resBox.classList.add('animate-pulse');

        try {
            const response = await fetch(path, { headers: { 'Accept': 'application/json' } });
            if (!response.ok) throw new Error(`HTTP Error: ${response.status}`);
            const data = await response.json();
            resBox.innerText = JSON.stringify(data, null, 4);
        } catch (err) {
            resBox.innerText = "// CRITICAL ERROR: " + err.message;
        } finally {
            resBox.classList.remove('animate-pulse');
            btn.innerText = "EXECUTE";
            btn.disabled = false;
        }
    }
</script>

<%- include('partials/footer') %>